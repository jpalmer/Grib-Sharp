(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;a=self;b=a.websharper_Viewer=a.websharper_Viewer||{};c=b.Client=b.Client||{};d=c.topoJsonPointDetails=c.topoJsonPointDetails||{};e=c.topoJsonPoint=c.topoJsonPoint||{};f=c.topoJsonParentObject=c.topoJsonParentObject||{};g=a["StartupCode$websharper-Viewer$Client"]=a["StartupCode$websharper-Viewer$Client"]||{};h=a.JSON;i=a.WebSharper;j=i&&i.Remoting;k=j&&j.AjaxRemotingProvider;l=i&&i.UI;m=l&&l.Var$1;n=a.d3;o=n&&n.geo;p=l&&l.Submitter;q=n&&n.behavior;r=i&&i.Arrays;s=l&&l.View;t=i&&i.Concurrency;u=l&&l.Doc;v=l&&l.AttrProxy;d.New=function(w,x){return{type:w,coordinates:x};};e.New=function(w,x){return{type:w,geometry:x};};f.New=function(w,x){return{type:w,features:x};};c.Main=function(){var w,x,y,z,A,B,C,D,E;w=h.parse((new k.New()).Sync("websharper-Viewer:websharper_Viewer.Server.GetWorld:-760671193",[]));x=m.Create$1("");y=n.select("#map").append("svg").attr("width",500).attr("height",500);z=y.append("g");z.append("path").datum(c.topojson().feature(w,w.objects.subunits)).attr("d",o.path().projection(c.projection()));A=p.CreateOption(x.get_View());B=(new k.New()).Sync("websharper-Viewer:websharper_Viewer.Server.GetWind:-1694120067",["Pacific.wind.7days.grb"]);C=o.path().projection(c.projection()).pointRadius(2);y.call(q.zoom().scaleExtent([1,8]).on("zoom",function(){z.attr("transform","translate("+n.event.translate+")");}));D=f.New("FeatureCollection",r.map(function(F){return e.New("Feature",d.New("Point",[F.Long/1000,F.Lat/1000]));},B));E=s.MapAsync(function(F){var G,H;return F!=null&&F.$==1?(z.append("path").datum(D).attr("d",C),G=null,t.Delay(function(){return t.Return("");})):(H=null,t.Delay(function(){return t.Return("");}));},A.view);return u.Element("div",[],[u.Input([],x),u.Button("Send",[],function(){A.Trigger();}),u.Element("hr",[],[]),u.Element("h4",[v.Create("class","text-muted")],[u.TextNode("The server responded:")]),u.Element("div",[v.Create("class","jumbotron")],[u.Element("h1",[],[u.TextView(E)])])]);};c.projection=function(){g.$cctor();return g.projection;};c.topojson=function(){g.$cctor();return g.topojson;};g.$cctor=function(){g.$cctor=a.ignore;g.topojson=self.topojson;g.projection=o.mercator();};}());

//# sourceMappingURL=websharper-Viewer.min.map