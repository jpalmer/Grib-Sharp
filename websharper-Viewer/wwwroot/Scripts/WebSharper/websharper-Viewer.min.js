(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a=self;b=a.websharper_Viewer=a.websharper_Viewer||{};c=b.Client=b.Client||{};d=c.topoJsonPointDetails=c.topoJsonPointDetails||{};e=c.topoJsonPoint=c.topoJsonPoint||{};f=c.topoJsonParentObject=c.topoJsonParentObject||{};g=a["StartupCode$websharper-Viewer$Client"]=a["StartupCode$websharper-Viewer$Client"]||{};h=a.JSON;i=a.WebSharper;j=i&&i.Remoting;k=j&&j.AjaxRemotingProvider;l=i&&i.UI;m=l&&l.Var$1;n=a.d3;o=n&&n.geo;p=l&&l.Submitter;q=i&&i.Arrays;r=l&&l.View;s=i&&i.Concurrency;t=l&&l.Doc;u=l&&l.AttrProxy;d.New=function(v,w){return{type:v,coordinates:w};};e.New=function(v,w){return{type:v,geometry:w};};f.New=function(v,w){return{type:v,features:w};};c.Main=function(){var v,w,x,y,z,A,B,C;v=h.parse((new k.New()).Sync("websharper-Viewer:websharper_Viewer.Server.GetWorld:-1685810977",[]));w=m.Create$1("");x=n.select("#map").append("svg").attr("width",500).attr("height",500).append("g");x.append("path").datum(c.topojson().feature(v,v.objects.subunits)).attr("d",o.path().projection(c.projection()));y=p.CreateOption(w.get_View());z=(new k.New()).Sync("websharper-Viewer:websharper_Viewer.Server.GetWind:1588843736",["Pacific.wind.7days.grb"]);A=o.path().projection(c.projection()).pointRadius(2);B=f.New("FeatureCollection",q.map(function(D){return e.New("Feature",d.New("Point",[D.Long/1000,D.Lat/1000]));},z));C=r.MapAsync(function(D){var E,F;return D!=null&&D.$==1?(x.append("path").datum(B).attr("d",A),E=null,s.Delay(function(){return s.Return("");})):(F=null,s.Delay(function(){return s.Return("");}));},y.view);return t.Element("div",[],[t.Input([],w),t.Button("Send",[],function(){y.Trigger();}),t.Element("hr",[],[]),t.Element("h4",[u.Create("class","text-muted")],[t.TextNode("The server responded:")]),t.Element("div",[u.Create("class","jumbotron")],[t.Element("h1",[],[t.TextView(C)])])]);};c.projection=function(){g.$cctor();return g.projection;};c.topojson=function(){g.$cctor();return g.topojson;};g.$cctor=function(){g.$cctor=a.ignore;g.topojson=self.topojson;g.projection=o.mercator();};}());

//# sourceMappingURL=websharper-Viewer.min.map