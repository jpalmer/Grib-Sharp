(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;a=self;b=a.websharper_Viewer=a.websharper_Viewer||{};c=b.Client=b.Client||{};d=c.topoJsonPointDetails=c.topoJsonPointDetails||{};e=c.topoJsonPoint=c.topoJsonPoint||{};f=c.topoJsonParentObject=c.topoJsonParentObject||{};g=a["StartupCode$websharper-Viewer$Client"]=a["StartupCode$websharper-Viewer$Client"]||{};h=a.d3;i=a.JSON;j=a.WebSharper;k=j&&j.Remoting;l=k&&k.AjaxRemotingProvider;m=j&&j.UI;n=m&&m.Var$1;o=h&&h.geo;p=m&&m.Submitter;q=h&&h.behavior;r=j&&j.Arrays;s=m&&m.View;t=j&&j.Concurrency;u=m&&m.Doc;v=m&&m.AttrProxy;d.New=function(w,x){return{type:w,coordinates:x};};e.New=function(w,x){return{type:w,geometry:x};};f.New=function(w,x){return{type:w,features:x};};c.Main=function(){var w,x,y,z,A,B,C,D,E;function F(G){z.attr("transform","translate("+h.event.Translate+")scale("+h.event.scale+")");}w=i.parse((new l.New()).Sync("websharper-Viewer:websharper_Viewer.Server.GetWorld:-383728790",[]));x=n.Create$1("");y=h.select("#map").append("svg").attr("width",500).attr("height",500);z=y.append("g");z.append("path").datum(c.topojson().feature(w,w.objects.subunits)).attr("d",o.path().projection(c.projection()));A=p.CreateOption(x.get_View());B=(new l.New()).Sync("websharper-Viewer:websharper_Viewer.Server.GetWind:971175128",["Pacific.wind.7days.grb"]);C=o.path().projection(c.projection()).pointRadius(2);y.call(function(){q.zoom().scaleExtent([1,8]).on("zoom",F);});D=f.New("FeatureCollection",r.map(function(G){return e.New("Feature",d.New("Point",[G.Long/1000,G.Lat/1000]));},B));E=s.MapAsync(function(G){var H,I;return G!=null&&G.$==1?(z.append("path").datum(D).attr("d",C),H=null,t.Delay(function(){return t.Return("");})):(I=null,t.Delay(function(){return t.Return("");}));},A.view);return u.Element("div",[],[u.Input([],x),u.Button("Send",[],function(){A.Trigger();}),u.Element("hr",[],[]),u.Element("h4",[v.Create("class","text-muted")],[u.TextNode("The server responded:")]),u.Element("div",[v.Create("class","jumbotron")],[u.Element("h1",[],[u.TextView(E)])])]);};c.projection=function(){g.$cctor();return g.projection;};c.topojson=function(){g.$cctor();return g.topojson;};g.$cctor=function(){g.$cctor=a.ignore;g.topojson=self.topojson;g.projection=o.mercator();};}());

//# sourceMappingURL=websharper-Viewer.min.map